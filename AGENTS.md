# Repository Guidelines

本ドキュメントは、このリポジトリで作業するコントリビューターおよび自動化エージェント向けの最小ガイドです。短く、具体的に、再現可能な変更を心がけてください。

## ルール

- 常に日本語で回答する。
- タスクごとにブランチを作成し、運用は「コミットとプルリクエスト」章のルールに従う。
- タスク進行時は下記ディレクトリを参照する:
  - `.kiro/specs/` 仕様・要件・タスク
  - `.kiro/steering/` プロダクト/組織/技術の方針や決定記録

## プロジェクト構成とモジュール配置

- 本リポジトリは、ドキュメントとソースコードを含むモノレポです。
- 主要ディレクトリ:
  - `apps/api`: バックエンド API (Node.js, TypeScript, Prisma)
  - `apps/web`: フロントエンド Web アプリ (Vite, React, Tailwind CSS)
  - `.kiro/specs/` 仕様・要件・タスク（トピックごとにサブディレクトリ）。
  - `.kiro/steering/` プロダクト/組織/技術の方針や決定記録。
- 追加文書は該当ディレクトリ配下に `kebab-case.md` で配置。画像等は各トピック直下の `assets/` にまとめ、相対パスで参照します。

## ビルド・テスト・開発コマンド

- ビルド不要（Markdown のみ）。任意で体裁チェックを実施可：
  - `npx prettier --check "**/*.md"`
  - `npx markdownlint **/*.md`
- リンク検証（任意）：`npx markdown-link-check -r .`

## コーディングスタイルと命名

- Markdown: ATX 見出し（#）、見出し間は 1 空行、箇条書きは `-` を使用。
- 文章は簡潔に。長文は段落分割し、目的 → 前提 → 結論の順で整理。
- コードブロックは言語タグを付与（例: `powershell, `bash, ```json）。
- ファイル名: `kebab-case.md`、画像: `kebab_case.png` を推奨。

## テスト指針（文書レビュー）

- 変更前後で: 見出し階層、相互リンク、用語の一貫性、日付更新を確認。
- 仕様系は「背景/課題/決定/根拠/影響/未決事項」を明記。チェックリストを PR 本文に貼付。
- 任意ツールの結果（Prettier/markdownlint/リンク検証）は PR に記載。

## コミットとプルリクエスト

- Conventional Commits を推奨：`docs: ...`、`fix: ...`、`chore: ...` 等。
- 1 コミット=1 意図。本文で背景と主要変更点、関連 Issue（例: `#123`）を明記。
- PR 要件: 概要、背景、変更点、影響範囲、確認手順、スクリーンショット/図（あれば）。Draft PR 歓迎（WIP より Draft 機能）。
- ブランチ運用:
  - すべて `master` から分岐。`master` への直接 push は禁止。
  - 命名: `feature/<issue番号>-<短い説明>`（例: `feature/123-add-link-check`）。issue がない場合は、000 とする。緊急修正は `hotfix/<短い説明>`。
  - PR 作成前に最新化: `git fetch origin && git rebase origin/master`。
  - マージ先は `master`。原則「Squash and merge」を推奨（履歴を簡潔に）。必要時のみ「Rebase and merge」。

## セキュリティと設定の注意

- 機密情報（キー/内部 URL/個人情報）はコミット禁止。必要に応じてスタブ化。
- 大規模削除・構造変更は小さな PR に分割。バイナリは必要時のみ。Git LFS が必要な場合は別途提案してください。

## エージェント向け補足

- 作業前にリポジトリを走査し、最小差分で `apply_patch` を利用。大きな変更は計画を共有して段階的に実施。
- ネットワーク/書き込み制限に留意し、長大な出力は避けます。
